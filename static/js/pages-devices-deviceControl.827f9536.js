(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-devices-deviceControl"],{4542:function(e,t,n){"use strict";n.r(t);var o=n("90ad"),i=n("f4b6");for(var a in i)"default"!==a&&function(e){n.d(t,e,(function(){return i[e]}))}(a);n("e6da");var r,c=n("f0c5"),u=Object(c["a"])(i["default"],o["b"],o["c"],!1,null,"aa0551ec",null,!1,o["a"],r);t["default"]=u.exports},"90ad":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return o}));var o={uniSection:n("2e5a").default,uniList:n("7f33").default,uniListItem:n("4c2b").default},i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",[n("uni-section",{attrs:{title:"Device name",type:"line"}}),n("uni-list",[n("uni-list-item",{attrs:{title:e.deviceName,rightText:"view/edit"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.edit_device.apply(void 0,arguments)}}})],1),n("uni-section",{attrs:{title:"Operation List",type:"line"}}),n("uni-list",[e._l(e.operationList,(function(t,o){return n("uni-list-item",{key:o,attrs:{title:t.title,rightText:"view","show-extra-icon":!0,"extra-icon":e.extraIcon1,"show-switch":!0},on:{switchChange:function(t){arguments[0]=t=e.$handleEvent(t),e.switchChange.apply(void 0,arguments)}}})})),n("uni-list-item",{attrs:{"show-extra-icon":!0,"extra-icon":e.extraIcon1,"show-switch":!0,showArrow:!1,switchChecked:e.currentStatus,title:"Switch"},on:{switchChange:function(t){arguments[0]=t=e.$handleEvent(t),e.switchChange.apply(void 0,arguments)}}})],2),n("v-uni-view",{staticClass:"input"},[n("v-uni-text",{staticStyle:{width:"80%","margin-top":"20px","margin-bottom":"20px"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e._getUsage.apply(void 0,arguments)}}},[e._v("Click to view usage statistics")])],1),n("v-uni-view",{staticClass:"delete_button"},[n("v-uni-button",{staticStyle:{width:"80%","margin-top":"35px","margin-bottom":"15px"},attrs:{type:"primary"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.delete_device.apply(void 0,arguments)}}},[e._v("delete this device")])],1)],1)},a=[]},e63e:function(e,t,n){var o=n("24fb");t=o(!1),t.push([e.i,"\nuni-page-body[data-v-aa0551ec]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;box-sizing:border-box;background-color:#efeff4;min-height:100%;height:auto}uni-view[data-v-aa0551ec]{font-size:14px;line-height:inherit}.example[data-v-aa0551ec]{padding:0 15px 15px}.example-info[data-v-aa0551ec]{padding:15px;color:#3b4144;background:#fff}.example-body[data-v-aa0551ec]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;padding:0;font-size:14px;background-color:#fff}\n.example[data-v-aa0551ec]{padding:0 15px}.example-info[data-v-aa0551ec]{\ndisplay:block;\npadding:15px;color:#3b4144;background-color:#fff;font-size:14px;line-height:20px}.example-info-text[data-v-aa0551ec]{font-size:14px;line-height:20px;color:#3b4144}.example-body[data-v-aa0551ec]{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;padding:15px;background-color:#fff}.word-btn-white[data-v-aa0551ec]{font-size:18px;color:#fff}.word-btn[data-v-aa0551ec]{\ndisplay:-webkit-box;display:-webkit-flex;display:flex;\n-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;border-radius:6px;height:48px;margin:15px;background-color:#007aff}.word-btn--hover[data-v-aa0551ec]{background-color:#4ca2ff}body.?%PAGE?%[data-v-aa0551ec]{background-color:#efeff4}",""]),e.exports=t},e6da:function(e,t,n){"use strict";var o=n("f5ef"),i=n.n(o);i.a},ed9c:function(e,t,n){"use strict";var o=n("4ea4");n("99af"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("96cf");var i=o(n("1da1")),a=o(n("2e5a")),r=o(n("7f33")),c=o(n("4c2b")),u=n("eb11"),s={components:{uniSection:a.default,uniList:r.default,uniListItem:c.default},data:function(){return{deviceName:"",roomId:"",operationName:"",extraIcon1:{color:"#007aff",size:"22",type:"gear-filled"},operationList:[],currentStatus:""}},onShow:function(){var e=this;return(0,i.default)(regeneratorRuntime.mark((function t(){var n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e,console.log("print id @global on show "+getApp().globalData.room_switched_to_id),e.deviceName=getApp().globalData.device_switched_to,e.roomId=getApp().globalData.room_switched_to_id,console.log("printing room_id attri on show: "+e.roomId),o=getApp().globalData.base_url+"/device/status?uid=".concat(e.roomId,"&devicename=").concat(n.deviceName),t.next=8,uni.request({url:o,data:{},method:"GET",header:{Authorization:"Bearer homital"},success:function(){var e=(0,i.default)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:200==t.statusCode?null!=t.data?(console.log("successfully obtained status for "+n.deviceName),n.currentStatus=t.data.power):n.currentStatus=!1:uni.showToast({icon:"none",title:t.data.error,duration:2e3});case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()});case 8:case"end":return t.stop()}}),t)})))()},methods:{edit_device:function(){getApp().globalData.room_switched_to_id=this.roomId,console.log("printing id before directing"+getApp().globalData.room_switched_to_id),uni.navigateTo({url:"../devices/changeDeviceName"})},_getUsage:function(){uni.navigateTo({url:"../dashboard/dashboard"})},delete_device:function(){var e=this;return(0,i.default)(regeneratorRuntime.mark((function t(){var n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e,o=getApp().globalData.base_url+"/user/rooms/devices?uid=".concat(e.roomId,"&devicename=").concat(n.deviceName),t.next=4,u.functions.makeAuthenticatedCall(function(){var e=(0,i.default)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("reached delete device"),200==t.statusCode?(console.log("successfully delete device "+n.deviceName),getApp().globalData.request_device_list=!0,uni.reLaunch({url:"../devices/deviceList"})):(n.error=t.data.error,uni.showToast({icon:"none",title:n.error,duration:2e3}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o,{},"DELETE");case 4:case"end":return t.stop()}}),t)})))()},add_member:function(){var e=this;return(0,i.default)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:getApp().globalData.room_switched_to_id=e.roomId,console.log("printing id @ add member"+getApp().globalData.room_switched_to_id),uni.navigateTo({url:"../user/addUser"});case 3:case"end":return t.stop()}}),t)})))()},switchChange:function(e){var t=this;return(0,i.default)(regeneratorRuntime.mark((function n(){var o,a,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(o=t,uni.showToast({title:"change:"+e.value,icon:"none"}),t.currentStatus){n.next=11;break}return console.log("trying to turn on..."),a=t.roomId,console.log("printing id before url"+a),r=getApp().globalData.base_url+"/user/rooms/devices/operations?uid=".concat(t.roomId,"&devicename=").concat(o.deviceName,"&operation=switch"),n.next=9,u.functions.makeAuthenticatedCall(function(){var e=(0,i.default)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("reached turn on"),200==t.statusCode?(console.log("successfully turn on "+o.deviceName),o.currentStatus=!0):(o.error=t.data.error,uni.showToast({icon:"none",title:o.error,duration:2e3}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r,{switch:"on",at:""},"POST");case 9:n.next=15;break;case 11:return console.log("trying to turn off..."),c=getApp().globalData.base_url+"/user/rooms/devices/operations?uid=".concat(t.roomId,"&devicename=").concat(o.deviceName,"&operation=switch"),n.next=15,u.functions.makeAuthenticatedCall(function(){var e=(0,i.default)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("reached turn off"),200==t.statusCode?(console.log("successfully turn off "+o.deviceName),o.currentStatus=!1):(o.error=t.data.error,uni.showToast({icon:"none",title:o.error,duration:2e3}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c,{switch:"off",at:""},"POST");case 15:case"end":return n.stop()}}),n)})))()},switchChangeEditted:function(e){console.log("click triggered"),console.log("e.value is:"+e.value),uni.showToast({title:"change:"+e.value,icon:"none"})}}};t.default=s},f4b6:function(e,t,n){"use strict";n.r(t);var o=n("ed9c"),i=n.n(o);for(var a in o)"default"!==a&&function(e){n.d(t,e,(function(){return o[e]}))}(a);t["default"]=i.a},f5ef:function(e,t,n){var o=n("e63e");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var i=n("4f06").default;i("5e008972",o,!0,{sourceMap:!1,shadowMode:!1})}}]);