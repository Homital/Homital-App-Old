(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-me-me"],{"095a":function(n,e,t){"use strict";var o=t("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t("96cf");var i=o(t("1da1")),r={data:function(){return{userinfo:"",refresh_token:"",error:"",notloggedin:null,loggingOutProcessing:!1}},onShow:function(){var n=this;return(0,i.default)(regeneratorRuntime.mark((function e(){var t,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=n,t.notloggedin=null,o=getApp().globalData.notloggedin,console.log("print val"+o),console.log("before"+t.notloggedin),t.notloggedin=getApp().globalData.notloggedin,t.userinfo=uni.getStorageSync("userinfo"),console.log("after userinfo: ",uni.getStorageSync("userinfo")),console.log("after"+t.notloggedin);case 9:case"end":return e.stop()}}),e)})))()},onPullDownRefresh:function(){var n=this;return(0,i.default)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("refresh"),t=n,t.notloggedin=null,console.log("checking account status"),t.notloggedin=getApp().globalData.notloggedin,t.userinfo=uni.getStorageSync("userinfo"),setTimeout((function(){uni.stopPullDownRefresh()}),1e3);case 7:case"end":return e.stop()}}),e)})))()},methods:{_logout:function(){var n=this;n.loggingOutProcessing=!0,this.refresh_token=getApp().globalData.refresh_token;var e=getApp().globalData.base_url+"/auth/user/logout";uni.request({url:e,data:{refresh_token:this.refresh_token},method:"DELETE",header:{"content-type":"application/json"},success:function(){var e=(0,i.default)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("trying to log out..."),e.next=3,uni.removeStorageSync("userinfo");case 3:return getApp().globalData.notloggedin=!0,getApp().globalData.refresh_token="",n.loggingOutProcessing=!1,e.next=8,uni.showToast({title:"You have successfully logged out.",duration:2e3});case 8:uni.reLaunch({url:"../me/me"});case 9:case"end":return e.stop()}}),e)})));function t(n){return e.apply(this,arguments)}return t}(),fail:function(){uni.removeStorageSync("userinfo"),getApp().globalData.notloggedin=!0,getApp().globalData.refresh_token="",n.loggingOutProcessing=!1,uni.reLaunch({url:"../me/me"})}})},_directToLogin:function(){uni.navigateTo({url:"../login/login",success:function(n){},fail:function(){},complete:function(){}})}}};e.default=r},1452:function(n,e,t){var o=t("24fb");e=o(!1),e.push([n.i,".container[data-v-e037a180]{padding:20px;font-size:14px;line-height:24px}",""]),n.exports=e},"2f5c":function(n,e,t){"use strict";t.r(e);var o=t("82dd"),i=t("de86");for(var r in i)"default"!==r&&function(n){t.d(e,n,(function(){return i[n]}))}(r);t("81a9");var a,u=t("f0c5"),l=Object(u["a"])(i["default"],o["b"],o["c"],!1,null,"e037a180",null,!1,o["a"],a);e["default"]=l.exports},"81a9":function(n,e,t){"use strict";var o=t("c1f4"),i=t.n(o);i.a},"82dd":function(n,e,t){"use strict";var o;t.d(e,"b",(function(){return i})),t.d(e,"c",(function(){return r})),t.d(e,"a",(function(){return o}));var i=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("v-uni-view",[1!=n.notloggedin&&0!=n.notloggedin||n.notloggedin?n._e():t("v-uni-view",[t("v-uni-view",{staticClass:"uni-padding-wrap uni-common-mt"},[t("v-uni-view",{staticClass:"uni-hello-text",staticStyle:{"margin-bottom":"500rpx"}},[n._v("You are logged in as "+n._s(n.userinfo))]),t("v-uni-view",{staticClass:"uni-btn-v uni-common-mt"},[t("v-uni-button",{attrs:{type:"primary",loading:n.loggingOutProcessing},on:{click:function(e){arguments[0]=e=n.$handleEvent(e),n._logout.apply(void 0,arguments)}}},[n._v(n._s(0==n.loggingOutProcessing?"log out":"logging out"))])],1)],1)],1),1!=n.notloggedin&&0!=n.notloggedin||!n.notloggedin?n._e():t("v-uni-view",[t("v-uni-view",{staticClass:"uni-padding-wrap uni-common-mt"},[t("v-uni-view",{staticClass:"uni-hello-text",staticStyle:{"margin-bottom":"500rpx"}},[n._v("You are not logged in yet.")]),t("v-uni-view",{staticClass:"uni-btn-v uni-common-mt"},[t("v-uni-button",{attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=n.$handleEvent(e),n._directToLogin.apply(void 0,arguments)}}},[n._v("log in")])],1)],1)],1)],1)},r=[]},c1f4:function(n,e,t){var o=t("1452");"string"===typeof o&&(o=[[n.i,o,""]]),o.locals&&(n.exports=o.locals);var i=t("4f06").default;i("6202f364",o,!0,{sourceMap:!1,shadowMode:!1})},de86:function(n,e,t){"use strict";t.r(e);var o=t("095a"),i=t.n(o);for(var r in o)"default"!==r&&function(n){t.d(e,n,(function(){return o[n]}))}(r);e["default"]=i.a}}]);