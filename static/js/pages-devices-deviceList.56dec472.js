(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-devices-deviceList"],{3031:function(e,t,i){"use strict";i.r(t);var n=i("a964"),o=i.n(n);for(var a in n)"default"!==a&&function(e){i.d(t,e,(function(){return n[e]}))}(a);t["default"]=o.a},"53dc":function(e,t,i){"use strict";i.d(t,"b",(function(){return o})),i.d(t,"c",(function(){return a})),i.d(t,"a",(function(){return n}));var n={uniSection:i("2e5a").default,uniGrid:i("cff3").default,uniGridItem:i("e395").default},o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",[i("v-uni-view",[i("v-uni-view",{staticClass:"warp"},[i("uni-section",{attrs:{title:e.username+"'s "+e.roomName,type:"line"}}),i("v-uni-view",{staticClass:"example-body"},[0!==e.deviceList.length?i("v-uni-view",{staticClass:"grid-dynamic-box"},[i("uni-grid",{attrs:{column:3,highlight:!0},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.change.apply(void 0,arguments)}}},e._l(e.deviceList,(function(t,n){return i("uni-grid-item",{key:n,attrs:{index:n}},[i("v-uni-view",{staticClass:"grid-item-box",style:{backgroundColor:t.color}},[i("v-uni-image",{staticClass:"image",attrs:{src:t.url,mode:"aspectFill"}}),i("v-uni-text",{staticClass:"text"},[e._v(e._s(t.text))])],1)],1)})),1)],1):e._e(),i("v-uni-button",{attrs:{type:"primary"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.add.apply(void 0,arguments)}}},[e._v("Add device")])],1)],1)],1),i("v-uni-view",{staticClass:"input"},[i("v-uni-text",{staticStyle:{width:"80%","margin-top":"20px","margin-bottom":"20px"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e._getRoomDetails.apply(void 0,arguments)}}},[e._v("Click to view room details")])],1)],1)},a=[]},"596d":function(e,t,i){var n=i("24fb");t=n(!1),t.push([e.i,"\nuni-page-body[data-v-f9cdd4e4]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;box-sizing:border-box;background-color:#efeff4;min-height:100%;height:auto}uni-view[data-v-f9cdd4e4]{font-size:14px;line-height:inherit}.example[data-v-f9cdd4e4]{padding:0 15px 15px}.example-info[data-v-f9cdd4e4]{padding:15px;color:#3b4144;background:#fff}.example-body[data-v-f9cdd4e4]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;padding:0;font-size:14px;background-color:#fff}\n.example[data-v-f9cdd4e4]{padding:0 15px}.example-info[data-v-f9cdd4e4]{\ndisplay:block;\npadding:15px;color:#3b4144;background-color:#fff;font-size:14px;line-height:20px}.example-info-text[data-v-f9cdd4e4]{font-size:14px;line-height:20px;color:#3b4144}.example-body[data-v-f9cdd4e4]{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;padding:15px;background-color:#fff}.word-btn-white[data-v-f9cdd4e4]{font-size:18px;color:#fff}.word-btn[data-v-f9cdd4e4]{\ndisplay:-webkit-box;display:-webkit-flex;display:flex;\n-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;border-radius:6px;height:48px;margin:15px;background-color:#007aff}.word-btn--hover[data-v-f9cdd4e4]{background-color:#4ca2ff}.image[data-v-f9cdd4e4]{width:%?50?%;height:%?50?%}.text[data-v-f9cdd4e4]{font-size:%?26?%;margin-top:%?10?%}.example-body[data-v-f9cdd4e4]{\ndisplay:block\n}.grid-dynamic-box[data-v-f9cdd4e4]{margin-bottom:15px}.grid-item-box[data-v-f9cdd4e4]{-webkit-box-flex:1;-webkit-flex:1;flex:1;\n   /* position: relative;\n*/\ndisplay:-webkit-box;display:-webkit-flex;display:flex;\n-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;padding:15px 0}.grid-dot[data-v-f9cdd4e4]{position:absolute;top:5px;right:15px}.swiper[data-v-f9cdd4e4]{height:420px}body.?%PAGE?%[data-v-f9cdd4e4]{background-color:#efeff4}",""]),e.exports=t},"8a52":function(e,t,i){var n=i("596d");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var o=i("4f06").default;o("c7132592",n,!0,{sourceMap:!1,shadowMode:!1})},"9a17":function(e,t,i){"use strict";i.r(t);var n=i("53dc"),o=i("3031");for(var a in o)"default"!==a&&function(e){i.d(t,e,(function(){return o[e]}))}(a);i("ceee");var r,c=i("f0c5"),d=Object(c["a"])(o["default"],n["b"],n["c"],!1,null,"f9cdd4e4",null,!1,n["a"],r);t["default"]=d.exports},a964:function(e,t,i){"use strict";var n=i("4ea4");i("a434"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("96cf");var o=n(i("1da1")),a=n(i("2e5a")),r=n(i("cff3")),c=n(i("e395")),d=i("eb11"),l={components:{uniSection:a.default,uniGrid:r.default,uniGridItem:c.default},data:function(){return{deviceList:[],username:"",deviceAdded:"",roomName:"room",roomId:"",roomRole:""}},onShow:function(){var e=this;return(0,o.default)(regeneratorRuntime.mark((function t(){var i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e,i.notloggedin=null,i.displayList=null,t.next=5,uni.getStorageSync("userinfo");case 5:return e.username=t.sent,console.log("after userinfo: ",i.username),console.log("print id @global on show "+getApp().globalData.room_switched_to_id),e.roomName=getApp().globalData.room_switched_to,e.roomId=getApp().globalData.room_switched_to_id,e.roomRole=getApp().globalData.room_switched_to_role,i.deviceList=[],console.log("trying to get device list..."),n=getApp().globalData.base_url+"/user/rooms/devices?uid=".concat(e.roomId),t.next=16,d.functions.makeAuthenticatedCall(function(){var e=(0,o.default)(regeneratorRuntime.mark((function e(t){var n,o,a,r,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log("reached get device list"),200!=t.statusCode){e.next=20;break}console.log("successfully obtain list of devices for user: "+i.username),n=t.data,console.log("dbList length is "+n.length),o=0;case 6:if(!(o<n.length)){e.next=17;break}return a=n[o],r=a["name"],console.log("printing device names"+r),c=a["type"],console.log("printing device types: "+c),e.next=14,i.deviceList.push({url:"/static/c".concat(i.deviceList.length+1,".png"),text:r,color:i.deviceList.length%2===0?"#f5f5f5":"#fff",type:c});case 14:o++,e.next=6;break;case 17:getApp().globalData.request_device_list=!1,e.next=21;break;case 20:500==t.statusCode?i.deviceList=[]:uni.showToast({icon:"none",title:t.data.error,duration:2e3});case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n,{},"GET");case 16:case"end":return t.stop()}}),t)})))()},methods:{change:function(e){var t=e.detail.index,i=this.deviceList[t]["text"],n=this.deviceList[t]["type"];getApp().globalData.device_switched_to=i,getApp().globalData.device_type_switched_to=n,uni.showToast({title:"Click to view device ".concat(i),icon:"none"}),uni.redirectTo({url:"../devices/deviceControl"})},add:function(){var e=this;console.log("tHIS.deviceList.length is "+e.deviceList.length),e.deviceList.length<9?uni.navigateTo({url:"./deviceAdd"}):uni.showToast({title:"Maximum of 9 devices is allowed in this device",icon:"none"})},del:function(){this.deviceList.splice(this.deviceList.length-1,1)},_getRoomDetails:function(){var e=this;uni.navigateTo({url:"../rooms/roomDetails?room=".concat(e.room,"&list=roomList"),success:function(){var e=(0,o.default)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),fail:function(){},complete:function(){}})}}};t.default=l},ceee:function(e,t,i){"use strict";var n=i("8a52"),o=i.n(n);o.a}}]);