(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-rooms-roomList"],{"0525":function(t,e,i){"use strict";i.r(e);var n=i("654a"),o=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,(function(){return n[t]}))}(a);e["default"]=o.a},"09cf":function(t,e,i){var n=i("9f87");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=i("4f06").default;o("509386f2",n,!0,{sourceMap:!1,shadowMode:!1})},"428d":function(t,e,i){"use strict";i.r(e);var n=i("e650"),o=i("97a2");for(var a in o)"default"!==a&&function(t){i.d(e,t,(function(){return o[t]}))}(a);i("e9a7");var r,l=i("f0c5"),c=Object(l["a"])(o["default"],n["b"],n["c"],!1,null,"3726a086",null,!1,n["a"],r);e["default"]=c.exports},"654a":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={name:"UniCard",props:{title:{type:String,default:""},extra:{type:String,default:""},note:{type:String,default:""},thumbnail:{type:String,default:""},mode:{type:String,default:"basic"},isFull:{type:Boolean,default:!1},isShadow:{type:Boolean,default:!1}},methods:{onClick:function(){this.$emit("click")}}};e.default=n},"924f":function(t,e,i){"use strict";var n=i("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("96cf");var o=n(i("1da1")),a=n(i("2e5a")),r=n(i("cff3")),l=n(i("e395")),c=n(i("cfb0")),d=i("eb11"),s={components:{uniSection:a.default,uniGrid:r.default,uniGridItem:l.default,uniCard:c.default},data:function(){return{roomList:[],username:"",displayList:null,notloggedin:null,roomAdded:"",roomIdAdded:"",roomRoleAdded:""}},onShow:function(){var t=this;return(0,o.default)(regeneratorRuntime.mark((function e(){var i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t,i.notloggedin=null,i.displayList=null,e.next=5,uni.getStorageSync("userinfo");case 5:if(t.username=e.sent,console.log("checking account status"),console.log("before"+i.notloggedin),i.notloggedin=getApp().globalData.notloggedin,console.log("after"+i.notloggedin),i.notloggedin){e.next=16;break}return i.roomList=[],console.log("trying to get room list..."),n=getApp().globalData.base_url+"/user/rooms",e.next=16,d.functions.makeAuthenticatedCall(function(){var t=(0,o.default)(regeneratorRuntime.mark((function t(e){var n,o,a,r,l,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("reached get room list"),200!=e.statusCode){t.next=23;break}console.log("successfully obtain list of rooms for user: "+i.username),n=e.data,console.log("dbList length is "+n.length),o=0;case 6:if(!(o<n.length)){t.next=18;break}return a=n[o],r=a["name"],console.log("printing room names"+r),l=a["uid"],c=a["role"],console.log("printing room id: "+l),t.next=15,i.roomList.push({url:"/static/c".concat(i.roomList.length+1,".png"),text:r,color:i.roomList.length%2===0?"#f5f5f5":"#fff",room_id:l,role:c});case 15:o++,t.next=6;break;case 18:getApp().globalData.room_list=i.roomList,getApp().globalData.request_room_list=!1,i.displayList=!0,t.next=26;break;case 23:i.displayList=!1,uni.showToast({icon:"none",title:e.data.error,duration:2e3}),console.log(e.data.error);case 26:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n,{},"GET");case 16:case"end":return e.stop()}}),e)})))()},methods:{change:function(t){var e=t.detail.index,i=this.roomList[e]["text"],n=this.roomList[e]["room_id"],o=this.roomList[e]["role"];uni.showToast({title:"Click to view room ".concat(i),icon:"none"}),getApp().globalData.room_switched_to=i,getApp().globalData.room_switched_to_id=n,getApp().globalData.room_switched_to_role=o,console.log("printing roomClicked id @change "+n),console.log("printing id @ change "+getApp().globalData.room_switched_to_id),uni.navigateTo({url:"../devices/deviceList?room=".concat(i,"&list=roomList")})},add:function(){var t=this;console.log("tHIS.roomList.length is "+t.roomList.length),uni.navigateTo({url:"./roomAdd",success:function(){var t=(0,o.default)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),fail:function(){},complete:function(){}})},_directToLogin:function(){console.log("directing..."),uni.navigateTo({url:"../login/login",success:function(t){console.log("suc")},fail:function(){console.log("fal")},complete:function(){}})}}};e.default=s},"97a2":function(t,e,i){"use strict";i.r(e);var n=i("924f"),o=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,(function(){return n[t]}))}(a);e["default"]=o.a},"9f87":function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.uni-card[data-v-8c7b9132]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-flex:1;-webkit-flex:1;flex:1;box-shadow:0 0 0 transparent;margin:12px;background-color:#fff;position:relative;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;border-color:#c8c7cc;border-style:solid;border-width:1px;border-radius:3px;overflow:hidden}.uni-card__thumbnailimage[data-v-8c7b9132]{position:relative;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;height:150px;overflow:hidden}.uni-card__thumbnailimage-box[data-v-8c7b9132]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-flex:1;-webkit-flex:1;flex:1;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;overflow:hidden}.uni-card__thumbnailimage-image[data-v-8c7b9132]{-webkit-box-flex:1;-webkit-flex:1;flex:1}.uni-card__thumbnailimage-title[data-v-8c7b9132]{display:-webkit-box;display:-webkit-flex;display:flex;position:absolute;bottom:0;left:0;right:0;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;padding:%?16?% %?24?%;background-color:rgba(0,0,0,.4)}.uni-card__thumbnailimage-title-text[data-v-8c7b9132]{-webkit-box-flex:1;-webkit-flex:1;flex:1;font-size:%?28?%;color:#fff}.uni-card__title[data-v-8c7b9132]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;padding:10px;border-bottom-color:#f5f5f5;border-bottom-style:solid;border-bottom-width:1px}.uni-card__title-header[data-v-8c7b9132]{width:40px;height:40px;overflow:hidden;border-radius:5px}.uni-card__title-header-image[data-v-8c7b9132]{width:40px;height:40px}.uni-card__title-content[data-v-8c7b9132]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;padding-left:10px;height:40px;overflow:hidden}.uni-card__title-content-title[data-v-8c7b9132]{font-size:%?28?%;line-height:22px;max-lines:1}.uni-card__title-content-extra[data-v-8c7b9132]{font-size:%?26?%;line-height:%?35?%;color:#999}.uni-card__header[data-v-8c7b9132]{display:-webkit-box;display:-webkit-flex;display:flex;position:relative;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;padding:%?24?%;-webkit-box-align:center;-webkit-align-items:center;align-items:center;border-bottom-color:#c8c7cc;border-bottom-style:solid;border-bottom-width:1px}.uni-card__header-title[data-v-8c7b9132]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;margin-right:%?16?%;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.uni-card__header-title-text[data-v-8c7b9132]{font-size:%?32?%;-webkit-box-flex:1;-webkit-flex:1;flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.uni-card__header-extra-img[data-v-8c7b9132]{height:%?40?%;width:%?40?%;margin-right:%?16?%}.uni-card__header-extra-text[data-v-8c7b9132]{-webkit-box-flex:1;-webkit-flex:1;flex:1;margin-left:%?16?%;font-size:%?28?%;text-align:right;color:#999}.uni-card__content[data-v-8c7b9132]{color:#333}.uni-card__content--pd[data-v-8c7b9132]{padding:%?24?%}.uni-card__content-extra[data-v-8c7b9132]{font-size:%?28?%;padding-bottom:10px;color:#999}.uni-card__footer[data-v-8c7b9132]{-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;padding:10px;border-top-color:#c8c7cc;border-top-style:solid;border-top-width:1px}.uni-card__footer-text[data-v-8c7b9132]{color:#999;font-size:%?28?%}.uni-card--shadow[data-v-8c7b9132]{border-color:#c8c7cc;border-style:solid;border-width:1px;box-shadow:0 1px 2px rgba(0,0,0,.2)}.uni-card--full[data-v-8c7b9132]{margin:0;border-radius:0}',""]),t.exports=e},a8ba:function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,"\nuni-page-body[data-v-3726a086]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;box-sizing:border-box;background-color:#efeff4;min-height:100%;height:auto}uni-view[data-v-3726a086]{font-size:14px;line-height:inherit}.example[data-v-3726a086]{padding:0 15px 15px}.example-info[data-v-3726a086]{padding:15px;color:#3b4144;background:#fff}.example-body[data-v-3726a086]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;padding:0;font-size:14px;background-color:#fff}\n.example[data-v-3726a086]{padding:0 15px}.example-info[data-v-3726a086]{\ndisplay:block;\npadding:15px;color:#3b4144;background-color:#fff;font-size:14px;line-height:20px}.example-info-text[data-v-3726a086]{font-size:14px;line-height:20px;color:#3b4144}.example-body[data-v-3726a086]{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;padding:15px;background-color:#fff}.word-btn-white[data-v-3726a086]{font-size:18px;color:#fff}.word-btn[data-v-3726a086]{\ndisplay:-webkit-box;display:-webkit-flex;display:flex;\n-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;border-radius:6px;height:48px;margin:15px;background-color:#007aff}.word-btn--hover[data-v-3726a086]{background-color:#4ca2ff}.image[data-v-3726a086]{width:%?50?%;height:%?50?%}.text[data-v-3726a086]{font-size:%?26?%;margin-top:%?10?%}.example-body[data-v-3726a086]{\ndisplay:block\n}.grid-dynamic-box[data-v-3726a086]{margin-bottom:15px}.grid-item-box[data-v-3726a086]{-webkit-box-flex:1;-webkit-flex:1;flex:1;\n   /* position: relative;\n*/\ndisplay:-webkit-box;display:-webkit-flex;display:flex;\n-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;padding:15px 0}.grid-dot[data-v-3726a086]{position:absolute;top:5px;right:15px}.swiper[data-v-3726a086]{height:420px}body.?%PAGE?%[data-v-3726a086]{background-color:#efeff4}",""]),t.exports=e},aad9:function(t,e,i){var n=i("a8ba");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=i("4f06").default;o("2554e3fe",n,!0,{sourceMap:!1,shadowMode:!1})},c5e3:function(t,e,i){"use strict";var n=i("09cf"),o=i.n(n);o.a},cfb0:function(t,e,i){"use strict";i.r(e);var n=i("f4d0"),o=i("0525");for(var a in o)"default"!==a&&function(t){i.d(e,t,(function(){return o[t]}))}(a);i("c5e3");var r,l=i("f0c5"),c=Object(l["a"])(o["default"],n["b"],n["c"],!1,null,"8c7b9132",null,!1,n["a"],r);e["default"]=c.exports},e650:function(t,e,i){"use strict";i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return n}));var n={uniCard:i("cfb0").default,uniSection:i("2e5a").default,uniGrid:i("cff3").default,uniGridItem:i("e395").default},o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("v-uni-view",{staticClass:"uni-padding-wrap uni-common-mt"},[null!=t.notloggedin&&t.notloggedin?i("v-uni-view",[i("uni-card",{attrs:{title:"Log in",mode:"title","is-shadow":!0},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t._directToLogin.apply(void 0,arguments)}}},[t._v("Log in to check and control your devices.")])],1):t._e()],1),null==t.notloggedin||t.notloggedin?t._e():i("v-uni-view",[i("v-uni-view",{staticClass:"warp"},[i("v-uni-text",{staticClass:"example-info"},[t._v("Click to control your devices")]),i("uni-section",{attrs:{title:t.username+"'s home",type:"line"}}),i("v-uni-view",{staticClass:"example-body"},[0!==t.roomList.length?i("v-uni-view",{staticClass:"grid-dynamic-box"},[i("uni-grid",{attrs:{column:3,highlight:!0},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.change.apply(void 0,arguments)}}},t._l(t.roomList,(function(e,n){return i("uni-grid-item",{key:n,attrs:{index:n}},[i("v-uni-view",{staticClass:"grid-item-box",style:{backgroundColor:e.color}},[i("v-uni-image",{staticClass:"image",attrs:{src:e.url,mode:"aspectFill"}}),i("v-uni-text",{staticClass:"text"},[t._v(t._s(e.text))])],1)],1)})),1)],1):t._e(),i("v-uni-button",{attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.add.apply(void 0,arguments)}}},[t._v("Add room")])],1)],1)],1)],1)},a=[]},e9a7:function(t,e,i){"use strict";var n=i("aad9"),o=i.n(n);o.a},f4d0:function(t,e,i){"use strict";var n;i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return n}));var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"uni-card",class:{"uni-card--full":!0===t.isFull||"true"===t.isFull,"uni-card--shadow":!0===t.isShadow||"true"===t.isShadow},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onClick.apply(void 0,arguments)}}},["style"===t.mode?i("v-uni-view",{staticClass:"uni-card__thumbnailimage"},[i("v-uni-view",{staticClass:"uni-card__thumbnailimage-box"},[i("v-uni-image",{staticClass:"uni-card__thumbnailimage-image",attrs:{src:t.thumbnail,mode:"aspectFill"}})],1),t.title?i("v-uni-view",{staticClass:"uni-card__thumbnailimage-title"},[i("v-uni-text",{staticClass:"uni-card__thumbnailimage-title-text"},[t._v(t._s(t.title))])],1):t._e()],1):t._e(),"title"===t.mode?i("v-uni-view",{staticClass:"uni-card__title"},[i("v-uni-view",{staticClass:"uni-card__title-header"},[i("v-uni-image",{staticClass:"uni-card__title-header-image",attrs:{src:t.thumbnail,mode:"scaleToFill"}})],1),i("v-uni-view",{staticClass:"uni-card__title-content"},[i("v-uni-text",{staticClass:"uni-card__title-content-title"},[t._v(t._s(t.title))]),i("v-uni-text",{staticClass:"uni-card__title-content-extra"},[t._v(t._s(t.extra))])],1)],1):t._e(),"basic"===t.mode&&t.title?i("v-uni-view",{staticClass:"uni-card__header"},[t.thumbnail?i("v-uni-view",{staticClass:"uni-card__header-extra-img-view"},[i("v-uni-image",{staticClass:"uni-card__header-extra-img",attrs:{src:t.thumbnail}})],1):t._e(),i("v-uni-text",{staticClass:"uni-card__header-title-text"},[t._v(t._s(t.title))]),t.extra?i("v-uni-text",{staticClass:"uni-card__header-extra-text"},[t._v(t._s(t.extra))]):t._e()],1):t._e(),i("v-uni-view",{staticClass:"uni-card__content uni-card__content--pd"},["style"===t.mode&&t.extra?i("v-uni-view",{},[i("v-uni-text",{staticClass:"uni-card__content-extra"},[t._v(t._s(t.extra))])],1):t._e(),t._t("default")],2),t.note?i("v-uni-view",{staticClass:"uni-card__footer"},[t._t("footer",[i("v-uni-text",{staticClass:"uni-card__footer-text"},[t._v(t._s(t.note))])])],2):t._e()],1)},a=[]}}]);